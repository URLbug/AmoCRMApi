# Тестовое задание

<div class="bage" aligin="center">
    <img src="https://img.shields.io/badge/Docker-24.0.2-blue?logo=Docker">
    <img src="https://img.shields.io/badge/PHP-8.3-blue?logo=php">
    <img src="https://img.shields.io/badge/Laravel-11.X-blue?logo=laravel">
    <img src="https://img.shields.io/badge/MariaDB-8.0-blue?logo=mariadb">
</div>
___

## Цель 

Написать отправку заявок с сайта в AmoCRM.

___

## Задача

- [x] Создать страницу и добавить на неё форму из 4-х полей: имя, email, телефон, цена.

- [x] Заявку из формы сайта создавать в AmoCRM, как сделку с прикрепленным к ней контактом. В контакт передавать имя, email и телефон. В сделку передавать цену.

- [x] Если пользователь провел на сайте больше 30 секунд - при создании сделки нужно передать эту информацию в AmoCRM в дополнительное поле в виде boolean значения (1 и 0 тоже подойдет), предварительно доп поле нужно создать в AmoCRM, название поля можно выбрать любое.

- [x] Пользователю который заполняет форму, не нужно проходить регистрацию ни в AmoCRM, ни где-либо еще.

___

## Как собрать сборку?

1. Чтобы быстро собрать сборку Вам надо ввести команду ```make full-build``` или ```./build.bash```.

2. Зайдите в .env файл и там найдите там следующии параметры:

    ```.env
    SUB_DOMAIN=Поддомен от Вашего AmoCRM(пример: testaccaunt)
    REDIRECT_URL=Домен от Вашего AmoCRM (пример: https://testaccaunt.amocrm.ru)
    CLIENT_KEY=Ключ от интеграции
    CLIENT_ID=ID от интеграции
    CODE=Код от интеграции
    CUSTOM=ID кастомного поля
    ```

3. Как только Вы все параметры заполнели, то запустите команду ```make start```.

4. Перейдите по ссылке localhost:8000
___

## Небольшой гайд как создать интеграцию

1. Зайдите в Ваш аккаунт в AmoCRM и найдите ```AmoМаркет```.

2. Создайте интеграцию нажав на три точки возле ```web hooks``` и после чего нажмите создать интеграцию, а затем выберете ```внешняя интеграция```.

3. Заполните все поля(кроме хука).
    1. Поле ```Ссылкой для перенаправления``` вставляете свой URL(например, https://testaccaunt.amocrm.ru)
    2.Предоставляете доступ ко всему, а также пишите произвольное название интеграции и описание.

4. После того как Вы создали интеграцию перейдите в раздел установленные и нажмите на Вашу интеграцию. Перейдите в раздел ```Ключи и доступ``` и скопируйте это все в .env файл как указано в предыдущем разделе.

___

## Гайд по созданию и нахождения ID поля

1. Перейдите в ```Добавить контакт``` Вашем AmoCRM и перейдите в настроки.

2. Добавте поле и выберете числовой тип данных. Напишите произвольное имя для поля, а затем нажмите параметр ```Только черезе API``` пожеланию.

3. Нажмите ПКМ мышкой по полю которое Вы создали и найдите пункт ```Посмотреть поле```. Здесь Вам нужно будет найти ID поля. Для этого нажмите ```ctrl+shift+c``` и навидитесь на поле которое Вы создали. Чуть выше Вы должны найти, как показано на картинке, поле с ```data-id```. В этом поле, ```data-id```, нужно скопировать его ID. 

![Гайд](image.png)

4. Зайдите в .env файле и вставте в параметер ```CUSTOM``` ID Вашего поля.